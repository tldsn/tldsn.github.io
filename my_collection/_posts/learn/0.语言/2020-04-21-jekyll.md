---
layout: post
title: jekyll初识
categories: 语言
tags: jekyll
author: tldsn
---

* content
{:toc}

<mark>本文仅自用，请以最新官方文档为准</mark>

## base

* #### 基本命令

  * jekyll build　　默认构建到`./_site`文件夹中
  * jekyll sever　　一个开发服务器将会运行在 <http://localhost:4000/>

* #### 目录结构

| 主要文件/目录 |                   描述 |
| :------------ | ---------------------: |
| _config.yml   |               配置文件 |
| _drafts       |                   草稿 |
| _includes     |                   复用 |
| _layouts      |                   模板 |
| _posts        |                   文章 |
| _data         |               网站数据 |
| _site         | 默认生成静态页面的目录 |






## ☆常用变量

* site
* page
* layout
* content
* paginator

---

* site.time
* site.pages
* site.posts
* site.related_posts　　相关Post
* <mark>site.collections</mark>
* site.data
* site.categories.category
* site.tags.tag
* site.自定义变量  

---

* page.content
* page.title
* page.excerpt　　摘要
* page.url
* page.date
* page.id
* page.categories
* page.tags
* page.next
* page.previous  

---

* paginator.total_posts　　posts总数
* paginator.per_page　　每页posts数量
* paginator.total_pages　　总页数
* paginator.posts　　本页可用posts
* paginator.page　　当前页码
* paginator.previous_page
* paginator.next_page
* paginator.previous_page_path
* paginator.next_page_path

---

## Liquid

* #### 过滤器

* 日期格式化
* 字符串操作｛转码、过滤字符｝
* json转换
* 数组操作｛push、pop、随机、排序、数组转句子、｝
* 对象操作｛分组、判断、检索、｝

* #### 标签

* include

  >如果你需要在多个地方引用一小代码片段，可以使用 `include` 标签  
  Jekyll 要求所有被引用的文件放在根目录的 `_includes` 文件夹  
  还可以传递参数、变量  
  变量可以通过`{{ include.param }}`被调用  
  `include_relative`引入其他文件  

* highlight

>可以加入行号

* link

>链接

* post_url

>博文链接

* gist

>引入Github Gist
>需要引入jekyll-gist gem

## 配置

>参考：[jekyll默认配置](http://jekyllcn.com/docs/configuration/)

* Safe　　是否开启自定义插件
* Defaults　　设置YAML头信息默认值
* LSI　　为相关文章生成索引

* #### 头信息默认值

>在_config.yml 文件里设置 defaults 的值指定全站范围的默认值

```
defaults:
  -
    scope:
      path: "posts"
      type: "posts"
    values:
      layout: "post"
      author: "tldsn"
```

* #### 头信息

   预定义全局变量

* layout
* permalink
* published
* date
* category/categories
* tags

* #### 永久连接

* permalink

* #### 指定 Jekyll build 时的环境

<mark>
★在 build（或者 serve）参数中，可以指定 Jekyll 的环境参数，默认为development
</mark>

```liquid
{%- raw -%}
   JEKYLL_ENV=production jekyll build

   {% if jekyll.environment == "production" %}
      {% include disqus.html %}
   {% endif %}
{% endraw %}
```

* #### markdown选项

* Kramdown
* Redcarpet

* #### Liquid选项

* liquid错误处理方式


## 分页

>参考：[分页](http://jekyllcn.com/docs/pagination/)

* jekyll-paginate插件
* 只支持html文件
* 现不支持标签和类别分页，也不支持集合

## 集合

>同pages、posts

```
collections:
- my_collection
```


## github-pages

>使用 github-pages gem包管理Jekyll和其在Github Pages上的依赖，
>使用这个包可以在将网站部署到Github Pages上时， 不会因为各种不同版本的gem包而导致意外报错。  

```js
source 'https://rubygems.org'

require 'json'
require 'open-uri'
versions =JSON.parse(open('https://pages.github.com/versions.json').read)

gem 'github-pages', versions['github-pages']
```



## 插件

1. 在gemfile中安装
2. 在_config.yml中配置

## 自动部署

## 持续集成

## 参考

> [http://jekyllcn.com/docs/quickstart/](http://jekyllcn.com/docs/quickstart/)
