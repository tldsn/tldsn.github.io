---
layout: post
title: jekyll初识
categories: 语言
tags: jekyll
author: tldsn
---

* content
{:toc}

<mark>本文仅自用，请以最新官方文档为准</mark>

### base

* #### 基本命令

  * jekyll build　　默认构建到`./_site`文件夹中
  * jekyll sever　　一个开发服务器将会运行在 <http://localhost:4000/>

* #### 目录结构

| 主要文件/目录 | 描述 |
| :--- | ---: |
| _config.yml        |        配置文件                  |
|     _drafts           |           草稿                  |
|     _includes        |           复用               |
|     _layouts              |           模板               |
|         _posts         |            文章              |
|        _data           |           网站数据               |
|        _site           |             默认生成静态页面的目录             |

### 配置

>参考：[jekyll默认配置](http://jekyllcn.com/docs/configuration/)

* Safe　　是否开启自定义插件
* Defaults　　设置YAML头信息默认值
* LSI　　为相关文章生成索引

* #### 指定 Jekyll build 时的环境

<mark>
★在 build（或者 serve）参数中，可以指定 Jekyll 的环境参数，默认为development
</mark>

```liquid
{%- raw -%}
   JEKYLL_ENV=production jekyll build

   {% if jekyll.environment == "production" %}
      {% include disqus.html %}
   {% endif %}
{% endraw %}
```

* #### 头信息默认值

>在_config.yml 文件里设置 defaults 的值指定全站范围的默认值

```
defaults:
  -
    scope:
      path: "posts"
      type: "posts"
    values:
      layout: "post"
      author: "tldsn"
```

* #### 头信息

   预定义全局变量

* layout
* permalink
* published
* date
* category/categories
* tags

* #### 永久连接

* permalink

### 常用变量

* site
* page
* layout
* content
* paginator

---

* site.time
* site.pages
* site.posts
* site.related_posts　　相关Post
* <mark>site.collections</mark>
* site.data
* site.categories.category
* site.tags.tag
* site.自定义变量  

---

* page.content
* page.title
* page.excerpt　　摘要
* page.url
* page.date
* page.id
* page.categories
* page.tags
* page.next
* page.previous  

---

* paginator.total_posts　　posts总数
* paginator.per_page　　每页posts数量
* paginator.total_pages　　总页数
* paginator.posts　　本页可用posts
* paginator.page　　当前页码
* paginator.previous_page
* paginator.next_page
* paginator.previous_page_path
* paginator.next_page_path

---

### 集合

>同pages、posts

```
collections:
- my_collection
```

### Liquid

* #### 过滤器

* 日期格式
* 字符串操作｛转码、过滤字符｝
* json转换
* 数组操作｛push、pop、随机、排序、数组转句子、｝
* 对象操作｛分组、判断、检索、｝

* #### 标签

* include

>如果你需要在多个地方引用一小代码片段，可以使用 include 标签
>Jekyll 要求所有被引用的文件放在根目录的 _includes 文件夹
>还可以传递参数、变量
>变量可以通过{{ include.param }}被调用
>include_relative引入其他文件

* highlight

>可以加入行号
>要使用代码高亮，你还需要包含一个样式表。例如 syntax.css 。它包含了和 GitHub 一样的样式

* link

>链接

* post_url

>博文链接

* gist

>引入Github Gist
>需要引入jekyll-gist gem

### github-pages

使用 github-pages gem包
>管理Jekyll和其在Github Pages上的依赖，
>使用这个包可以在将网站部署到Github Pages上时， 不会因为各种不同版本的gem包而导致意外报错。  

```js
source 'https://rubygems.org'

require 'json'
require 'open-uri'
versions =JSON.parse(open('https://pages.github.com/versions.json').read)

gem 'github-pages', versions['github-pages']
```

### markdown选项

* Redcarpet

* Kramdown

### Liquid选项

* liquid错误处理方式

### 分页

>参考：[分页](http://jekyllcn.com/docs/pagination/)

* jekyll-paginate插件
* 只支持html文件
* 现不支持标签和类别分页，也不支持集合

<mark>
★不要在博客的头信息中设置 permalink，设置 permalink 会造成分页功能的瘫痪。缺省设置 permalink 即可。
</mark>

### 插件

安装插件三种方法

* _plugins文件夹
* 在_config.yml中配置
* 在gemfile中安装

自定义插件支持

1. 生成器 - Generators
2. 转换器 - Converters
3. 命令 - Commands
4. 标记 - Tags
5. 钩子 - Hooks

### 自动部署

### 持续集成

### 参考

> [http://jekyllcn.com/docs/quickstart/](http://jekyllcn.com/docs/quickstart/)
